<style>
.palette-color-btn {
  width: 42px;
  height: 42px;
  border-radius: 50%;
  overflow: hidden;
  display: inline-block;
  margin: 5px;
  background-color: currentColor;
  border: 3px solid currentColor;
}
.palette-color-btn:hover,
.palette-color-btn.active {
  border: 3px solid green;
}
.palette-container {
  width: 100%;
  text-align: center;
  display: flex;
  flex-wrap: wrap;
  align-content: space-between;
  align-items: flex-end;
  flex-direction: row;
  justify-content: center;
}
label[for='image_file'] {
  width: 100%;
}
#img-preview-file {
  object-position: center;
  object-fit: contain;
  max-height: 300px;
  width: 100%;
}

#colors-container {
  border-radius: 1em;
  padding-top: 1em;
  text-align: center;
  --bg-color: <%= @image.bg %>;
  --color: <%= @image.color %>;
  background: linear-gradient(0deg, var(--bg-color) 0%, var(--color) 100%);
  <%# background: var(--bg-color); %>
  color: var(--color);
  margin-bottom: 1em;
}
#colors-container input{
  background: inherit;
  color: inherit;
}
</style>
<section class="content">
  <%= form_for [:admin, image], local: true, html: { class: "row" } do |f| %>
    <div class="col-md-12">
      <!-- .card/ -->
      <div class="card card-primary card-outline">
        <!-- .card-body/ -->
        <div class="card-body row">
          <%= render "admin/shared/errors", object: image %>
         <div class="col-md-12">
            <div class="row" id="colors-container">
              <div class="form-group col-md-12">
                <%= f.label :file do %>
                  <%= image_tag image.file.present? ? image.file.vga.url : '', id: "img-preview-file" %>
                  <br>Imagen
                <% end %>
                <%= f.file_field :file, class: "form-control input-img", data: { target: "#img-preview-file" }, accept: "image/*" %>
              </div>
              <%= f.hidden_field :rainbow, class: "form-control" %>
              <div class="form-group col-md-6">            
                <div class="palette-container" id="bg-palette">
                  <% @image.palette.each do |hex| %>
                      <a href="<%= hex %>" class="palette-color-btn <%= 'active' if hex == @image.bg %>" style="color: <%= hex %>">
                        <%= hex %>
                      </a>
                    <% end %>
                </div>
                <%= f.label :bg, "Background" %>
                <%= f.hidden_field :bg %>
              </div>
              <div class="form-group col-md-6">            
                <div class="palette-container" id="color-palette">
                  <% @image.palette.each do |hex| %>
                      <a href="<%= hex %>" class="palette-color-btn <%= 'active' if hex == @image.color %>" style="color: <%= hex %>">
                        <%= hex %>
                      </a>
                    <% end %>
                </div>
                <%= f.label :color, "Color" %>
                <%= f.hidden_field :color %>
              </div>
            </div>
          </div>

          <div class="form-group col-md-6">
            <%= f.label :title, "Título" %>
            <%= f.text_field :title, class: "form-control", placeholder: "Título", required: true %>
          </div>

          <div class="form-group col-md-6">
            <%= f.label :alt, "Texto alternativo" %>
            <%= f.text_field :alt, class: "form-control", placeholder: "Texto alternativo", required: true %>
          </div>

        </div>
        <!-- /.card-body -->
        <!-- .card-footer/ -->
        <footer class="card-footer text-right">
          <button class="btn btn-outline-primary mt-2 mb-2 btn-sm"><i class="fas fa-save"></i> <%= t(:save) %></button>
        </footer>
        <!-- /.card-footer -->
      </div>
      <!-- /.card -->
    </div>
  <% end %>
</section>